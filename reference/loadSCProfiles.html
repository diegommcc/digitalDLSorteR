<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create a DigitalDLSorter object from single-cell RNA-seq
data — loadSCProfiles • digitalDLSorteR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create a DigitalDLSorter object from single-cell RNA-seq
data — loadSCProfiles"><meta property="og:description" content="Create a DigitalDLSorter object from single-cell RNA-seq
data from files (formats allowed: tsv, tsv.gz, mtx (sparse matrix) and hdf5)
or a SingleCellExperiment object. The data will be
stored in single.cell.real slot. The data provided should consist of
three pieces of information:
Single-cell counts: genes as
rows and cells as columns.
Cells metadata: annotations (columns) for
each cell (rows).
Genes metadata: annotations (columns) for each gene
(rows).
If the data is provided from files, single.cell.real
argument must be a vector of three elements ordered so that the first file
corresponds to the count matrix, the second to the cells metadata and the
last to the genes metadata. On the other hand, if the data is provided as a
SingleCellExperiment oject, it must contain single-cell
counts in the assay slot, cells metadata in the colData slot
and genes metadata in the rowData. The data must be provided without
any transformation (e.g. log-transformation) and raw counts are preferred."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">digitalDLSorteR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href=".././articles/pretrainedModels.html">Using pre-trained context-specific deconvolution models</a>
    </li>
    <li>
      <a href=".././articles/newModels.html">Building new deconvolution models</a>
    </li>
    <li>
      <a href=".././articles/realModelExample.html">Performance of a real model: deconvolution of colorectal cancer samples</a>
    </li>
    <li>
      <a href=".././articles/kerasIssues.html">Keras/TensorFlow installation and configuration</a>
    </li>
    <li>
      <a href=".././articles/hdf5Backend.html">HDF5 files as back-end</a>
    </li>
  </ul></li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/diegommcc/digitalDLSorteR" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a <code><a href="DigitalDLSorter-class.html">DigitalDLSorter</a></code> object from single-cell RNA-seq
data</h1>
    <small class="dont-index">Source: <a href="https://github.com/diegommcc/digitalDLSorteR/R/loadData.R" class="external-link"><code>R/loadData.R</code></a></small>
    <div class="hidden name"><code>loadSCProfiles.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Create a <code><a href="DigitalDLSorter-class.html">DigitalDLSorter</a></code> object from single-cell RNA-seq
data from files (formats allowed: tsv, tsv.gz, mtx (sparse matrix) and hdf5)
or a <code>SingleCellExperiment</code> object. The data will be
stored in <code>single.cell.real</code> slot. The data provided should consist of
three pieces of information:</p><ul><li><p>Single-cell counts: genes as
rows and cells as columns.</p></li>
<li><p>Cells metadata: annotations (columns) for
each cell (rows).</p></li>
<li><p>Genes metadata: annotations (columns) for each gene
(rows).</p></li>
</ul><p>If the data is provided from files, <code>single.cell.real</code>
argument must be a vector of three elements ordered so that the first file
corresponds to the count matrix, the second to the cells metadata and the
last to the genes metadata. On the other hand, if the data is provided as a
<code>SingleCellExperiment</code> oject, it must contain single-cell
counts in the <code>assay</code> slot, cells metadata in the <code>colData</code> slot
and genes metadata in the <code>rowData</code>. The data must be provided without
any transformation (e.g. log-transformation) and raw counts are preferred.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">loadSCProfiles</span><span class="op">(</span>
  <span class="va">single.cell.data</span>,
  <span class="va">cell.ID.column</span>,
  <span class="va">gene.ID.column</span>,
  <span class="va">name.dataset.h5</span>,
  min.counts <span class="op">=</span> <span class="fl">0</span>,
  min.cells <span class="op">=</span> <span class="fl">0</span>,
  fun.aggregate <span class="op">=</span> <span class="st">"sum"</span>,
  file.backend <span class="op">=</span> <span class="cn">NULL</span>,
  name.dataset.backend <span class="op">=</span> <span class="cn">NULL</span>,
  compression.level <span class="op">=</span> <span class="cn">NULL</span>,
  chunk.dims <span class="op">=</span> <span class="cn">NULL</span>,
  block.processing <span class="op">=</span> <span class="cn">FALSE</span>,
  verbose <span class="op">=</span> <span class="cn">TRUE</span>,
  project <span class="op">=</span> <span class="st">"DigitalDLSorterProject"</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>single.cell.data</dt>
<dd><p>If data is provided from files,
<code>single.cell.real</code> must be a vector of three elements: single-cell
counts, cells metadata and genes metadata. If data is provided from a
<code>SingleCellExperiment</code> object, single-cell counts must
be present in the <code>assay</code> slot, cells metadata in the <code>colData</code>
slot and genes metadata in the <code>rowData</code> slot.</p></dd>
<dt>cell.ID.column</dt>
<dd><p>Name or number of the column in the cells metadata
corresponding to cell names in expression matrix.</p></dd>
<dt>gene.ID.column</dt>
<dd><p>Name or number of the column in the genes metadata
corresponding to the names used for features/genes.</p></dd>
<dt>name.dataset.h5</dt>
<dd><p>Name of the data set if HDF5 file is provided.</p></dd>
<dt>min.counts</dt>
<dd><p>Minimum gene counts to filter (0 by default).</p></dd>
<dt>min.cells</dt>
<dd><p>Minimum of cells with more than <code>min.counts</code> (0 by
default).</p></dd>
<dt>fun.aggregate</dt>
<dd><p>In case of duplicated genes, it is possible to set the
function used to aggregate them. Allowed functions: <code>'sum'</code>,
<code>'mean'</code>, <code>'median'</code>. Note that this functionality only works
when data are provided from an mtx file (sparse matrices) that allows
duplicated rownames. Otherwise, R does not allow duplicated rownames.</p></dd>
<dt>file.backend</dt>
<dd><p>Valid file path where to store the loaded data as HDF5
file. If provided, data is stored in HDF5 files as back-end using
<span class="pkg">DelayedArray</span> and <span class="pkg">HDF5Array</span> packages instead of being loaded
into RAM. This is suitable for situations where you have large amounts of
data that cannot be stored in memory. Note that operations on these data
will be performed by blocks (i.e subsets of determined size), which may
result in longer execution times. <code>NULL</code> by default.</p></dd>
<dt>name.dataset.backend</dt>
<dd><p>Name of the dataset of the HDF5 file to be used.
Note that it cannot exist. If <code>NULL</code> (by default), a random dataset
name will be used.</p></dd>
<dt>compression.level</dt>
<dd><p>The compression level used if <code>file.backend</code> is
provided. It is an integer value between 0 (no compression) and 9 (highest
and slowest compression). See
<code>?<a href="https://rdrr.io/pkg/HDF5Array/man/dump-management.html" class="external-link">getHDF5DumpCompressionLevel</a></code> from the
<span class="pkg">HDF5Array</span> package for more information.</p></dd>
<dt>chunk.dims</dt>
<dd><p>Specifies dimensions that HDF5 chunk will have. If
<code>NULL</code>, the default value is a vector of two items: the number of
genes considered by <code><a href="DigitalDLSorter-class.html">DigitalDLSorter</a></code> object during the
simulation, and only one sample in order to increase read times in the
following steps. A larger number of columns written in each chunk may lead
to longer read times.</p></dd>
<dt>block.processing</dt>
<dd><p>Boolean indicating whether data should be treated as
blocks (only if data is provided as HDF5 file). <code>FALSE</code> by default.
Note that using this functionality is suitable for cases where is not
possible to load the data into RAM and therefore execution times will be
longer.</p></dd>
<dt>verbose</dt>
<dd><p>Show informative messages during the execution (<code>TRUE</code> by
default).</p></dd>
<dt>project</dt>
<dd><p>Name of the project for <code><a href="DigitalDLSorter-class.html">DigitalDLSorter</a></code>
object.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code><a href="DigitalDLSorter-class.html">DigitalDLSorter</a></code> object with the single-cell
RNA-seq data provided loaded into the <code>single.cell.real</code> slot as a
<code>SingleCellExperiment</code> object.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This data can be used to simulate new single-cell profiles using the
ZINB-WaVE framework with the <code><a href="estimateZinbwaveParams.html">estimateZinbwaveParams</a></code> function.
In this way, it is possible to increase the signal of cell types that are
underrepresented in the original dataset. If this step is not necessary,
these profiles will be used directly to simulate pseudo-bulk RNA-seq samples
with known cell composition.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="estimateZinbwaveParams.html">estimateZinbwaveParams</a></code>
<code><a href="generateBulkCellMatrix.html">generateBulkCellMatrix</a></code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span> <span class="co"># reproducibility</span></span>
<span class="r-in"><span class="va">sce</span> <span class="op">&lt;-</span> <span class="fu">SingleCellExperiment</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SingleCellExperiment/man/SingleCellExperiment.html" class="external-link">SingleCellExperiment</a></span><span class="op">(</span></span>
<span class="r-in">  assays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">    counts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span>
<span class="r-in">      <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">100</span>, lambda <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">40</span>, ncol <span class="op">=</span> <span class="fl">30</span>,</span>
<span class="r-in">      dimnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"RHC"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">    <span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  colData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">    Cell_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"RHC"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">    Cell_Type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"CellType"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span>, size <span class="op">=</span> <span class="fl">30</span>,</span>
<span class="r-in">                       replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span>,</span>
<span class="r-in">  rowData <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span class="r-in">    Gene_ID <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Gene"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">  <span class="op">)</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">DDLS</span> <span class="op">&lt;-</span> <span class="fu">loadSCProfiles</span><span class="op">(</span></span>
<span class="r-in">  single.cell.data <span class="op">=</span> <span class="va">sce</span>,</span>
<span class="r-in">  cell.ID.column <span class="op">=</span> <span class="st">"Cell_ID"</span>,</span>
<span class="r-in">  gene.ID.column <span class="op">=</span> <span class="st">"Gene_ID"</span>,</span>
<span class="r-in">  min.cells <span class="op">=</span> <span class="fl">0</span>,</span>
<span class="r-in">  min.counts <span class="op">=</span> <span class="fl">0</span>,</span>
<span class="r-in">  project <span class="op">=</span> <span class="st">"Simul_example"</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in">  </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://github.com/diegommcc" class="external-link">Diego Mañanes</a>, <a href="https://www.cnic.es/en/carlos-torroja" class="external-link">Carlos Torroja</a>, <a href="https://www.cnic.es/en/fatima-sanchez-cabo" class="external-link">Fatima Sanchez-Cabo</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.9000.</p>
</div>

      </footer></div>

  


  

  </body></html>

